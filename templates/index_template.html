<!DOCTYPE html>
<html class="light" lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R41TD0DEQB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-R41TD0DEQB');
    </script>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Awesome Greek Tech Jobs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "primary": "#000000", "background-light": "#ffffff", "background-dark": "#101622" },
                    fontFamily: { "display": ["Inter", "sans-serif"], "mono": ["JetBrains Mono", "monospace"] },
                    borderRadius: { "DEFAULT": "0px" },
                },
            },
        }
    </script>
    <style>
        .brutalist-border {
            border: 1px solid #000000;
        }

        .dark .brutalist-border {
            border: 1px solid #ffffff;
        }

        .mono-text {
            font-family: 'JetBrains Mono', monospace;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hidden-row {
            display: none !important;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            left: 0;
            top: 100%;
            margin-top: 2px;
            width: 14rem;
            background: white;
            z-index: 9999;
        }

        .dark .dropdown-menu {
            background: #000000;
        }

        .show {
            display: block !important;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-[#111318] dark:text-white flex flex-col min-h-screen transition-colors duration-200">

    <div
        class="bg-black text-white px-4 py-3 brutalist-border border-x-0 border-t-0 flex items-start gap-3 relative z-[60]">
        <span class="material-symbols-outlined text-sm mt-0.5">warning</span>
        <div class="text-[11px] leading-tight uppercase font-bold tracking-tight">
            NOTICE: This is a statically generated site. Data accuracy is dependent on source repository updates.
            <span class="text-yellow-400 underline underline-offset-2">Remote/Location policies are currently under
                construction</span> and may not reflect real-time changes.
        </div>
    </div>

    <nav
        class="sticky top-0 z-50 bg-background-light dark:bg-background-dark brutalist-border border-x-0 border-t-0 px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <span class="material-symbols-outlined text-xl">database</span>
            <span class="font-bold text-xs mono-text">AGTJ</span>
        </div>
        <div class="flex items-center gap-4">
            <button onclick="document.documentElement.classList.toggle('dark')"
                class="flex items-center justify-center">
                <span class="material-symbols-outlined text-xl">contrast</span>
            </button>
            <a href="https://github.com/leftkats/awesome-greek-tech-jobs"><span
                    class="material-symbols-outlined">terminal</span></a>
        </div>
    </nav>

    <header class="px-4 pt-8 pb-6 border-b brutalist-border border-x-0 border-t-0">
        <h1 class="text-4xl font-extrabold tracking-tighter uppercase mb-4">Awesome Greek<br>Tech Jobs</h1>
        <p class="text-xs font-bold mono-text max-w-xs">[A curated list of companies that hire for tech jobs in Greece]
        </p>
    </header>

    <section class="p-4 space-y-4 relative z-40">
        <div class="flex brutalist-border bg-white dark:bg-black overflow-hidden">
            <div class="flex items-center justify-center px-3 border-r brutalist-border"><span
                    class="material-symbols-outlined">search</span></div>
            <input id="searchInput" class="w-full p-3 text-xs mono-text border-none focus:ring-0 bg-transparent"
                placeholder="Filter by company or sector..." type="text" onkeyup="handleSearch()">
        </div>

    </section>

    <main class="flex flex-col flex-grow relative z-10" id="companyList">
        {% for company in companies %}
        <div class="company-row flex p-4 brutalist-border border-t-0 border-l-0 border-r-0 bg-white dark:bg-background-dark"
            data-name="{{ company.name }}" data-policy="{{ company.work_policy }}"
            data-sectors="{{ company.sectors|join(' ') }}">
            <div class="flex-1 space-y-2">
                <div class="flex items-center gap-2">
                    <h2 class="text-xl font-extrabold uppercase leading-none">{{ company.name }}</h2>
                    <span
                        class="text-[10px] brutalist-border px-1 font-bold uppercase {{ get_style(company.work_policy) }}">
                        {{ company.work_policy }}
                    </span>
                </div>
                <div class="flex flex-wrap gap-1">
                    {% for sector in company.sectors %}
                    <span class="text-[10px] mono-text uppercase border border-gray-300 dark:border-gray-700 px-1">{{
                        sector }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="flex items-center justify-end">
                <a class="brutalist-border p-3 flex items-center justify-center hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors"
                    href="{{ company.careers_url }}" target="_blank">
                    <span class="material-symbols-outlined">arrow_outward</span>
                </a>
            </div>
        </div>
        {% endfor %}
    </main>

    <footer
        class="p-8 flex flex-col items-center justify-center space-y-8 bg-white dark:bg-background-dark brutalist-border border-l-0 border-r-0 border-b-0">
        <div class="flex gap-2" id="paginationControls">
            <button onclick="changePage(-1)" id="prevBtn"
                class="brutalist-border px-4 py-2 font-bold mono-text text-xs hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors disabled:opacity-30">Prev</button>
            <div id="pageIndicator"
                class="brutalist-border px-4 py-2 font-bold mono-text text-xs bg-black text-white dark:bg-white dark:text-black">
                01</div>
            <button onclick="changePage(1)" id="nextBtn"
                class="brutalist-border px-4 py-2 font-bold mono-text text-xs hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors disabled:opacity-30">Next</button>
        </div>
        <div class="flex flex-col items-center gap-4">
            <a class="brutalist-border px-6 py-3 font-bold mono-text text-xs flex items-center gap-2 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors"
                href="https://github.com/leftkats/awesome-greek-tech-jobs">
                <span class="material-symbols-outlined text-sm">terminal</span>
                VIEW ON GITHUB
            </a>
            <div class="text-center">
                <p class="text-[9px] font-bold mono-text opacity-40 uppercase tracking-tighter">Deployed via GitHub
                    Pages</p>
                <p class="text-[9px] font-bold mono-text opacity-40 uppercase tracking-tighter">Maintained by the
                    Community</p>
            </div>
        </div>
    </footer>

    <div class="fixed bottom-6 right-6 z-[100]">
        <a href="https://github.com/leftkats/awesome-greek-tech-jobs/blob/main/CONTRIBUTING.MD" target="_blank"
            class="bg-black text-white dark:bg-white dark:text-black w-14 h-14 brutalist-border flex items-center justify-center active:translate-x-0.5 active:translate-y-0.5 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,1)]">
            <span class="material-symbols-outlined text-2xl">add</span>
        </a>
    </div>

    <script>
        let currentPage = 1;
        const itemsPerPage = {{ items_per_page }};
        let activeSector = 'all';
        let activePolicy = 'all';

        function toggleDropdown(id) {
            const drop = document.getElementById(id);
            const isOpen = drop.classList.contains('show');
            document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('show'));
            if (!isOpen) drop.classList.add('show');
        }

        function setFilter(type, value) {
            if (type === 'sector') {
                activeSector = value;
                document.getElementById('currentSector').innerText = (value === 'all') ? 'All Sectors' : value;
            }
            if (type === 'policy') {
                activePolicy = value;
                document.getElementById('currentPolicy').innerText = (value === 'all') ? 'Work Policy' : value;
            }
            document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('show'));
            currentPage = 1;
            updatePagination();
        }

        function updatePagination() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const allRows = Array.from(document.querySelectorAll('.company-row'));

            const filtered = allRows.filter(row => {
                const matchesText = (row.dataset.name + ' ' + row.dataset.sectors).toLowerCase().includes(query);
                const matchesSector = (activeSector === 'all' || row.dataset.sectors.toLowerCase().includes(activeSector.toLowerCase()));
                const matchesPolicy = (activePolicy === 'all' || row.dataset.policy.toLowerCase() === activePolicy.toLowerCase());
                return matchesText && matchesSector && matchesPolicy;
            });

            const totalPages = Math.ceil(filtered.length / itemsPerPage) || 1;
            allRows.forEach(row => row.classList.add('hidden-row'));

            filtered.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)
                .forEach(row => row.classList.remove('hidden-row'));

            document.getElementById('pageIndicator').innerText = currentPage.toString().padStart(2, '0');
            document.getElementById('prevBtn').disabled = (currentPage === 1);
            document.getElementById('nextBtn').disabled = (currentPage === totalPages);
            document.getElementById('paginationControls').style.display = totalPages > 1 ? 'flex' : 'none';
        }

        function handleSearch() { currentPage = 1; updatePagination(); }
        function changePage(step) { currentPage += step; updatePagination(); window.scrollTo(0, 0); }

        window.onclick = function (event) {
            if (!event.target.closest('.relative')) {
                document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('show'));
            }
        }

        updatePagination();
    </script>
</body>

</html>